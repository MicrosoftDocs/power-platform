---
title: Distributed tracing across multiple services​ in Power Platform
description: Discover how to implement distributed tracing in Power Platform to correlate telemetry across multiple services and ensure end-to-end traceability.
#customer intent: As a Power Platform user, I want to trace events across multiple services so that I can achieve end-to-end traceability in my solution.  
author: manuelap-msft
ms.subservice: architecture-center
ms.topic: example-scenario
ms.date: 04/05/2025
ms.author: mapichle
ms.reviewer: jhaskett-msft
contributors:
  - manuelap-msft
ms.contributors:
  - grarchib
search.audienceType:
  - admin
  - flowmaker
ms.custom:
  - ai-gen-docs-bap
  - ai-gen-description
  - ai-seo-date:04/05/2025
---

# ​​Distributed tracing across multiple services​ in Power Platform

This article explains how to achieve comprehensive observability across multiple services, including services within Power Platform, Azure, and Dynamics 365.

Monitoring tools and processes are essential for maintaining the health and performance of applications and services. They help track metrics, logs, and traces to identify issues and optimize performance. [Azure Monitor](/azure/azure-monitor/fundamentals/overview) is a comprehensive solution for collecting, analyzing, and acting on telemetry from your cloud and on-premises environments. It uses [Kusto Query Language (KQL)](/kusto/query/) to query and correlate telemetry data across different components. Monitoring tools and processes are a well understood pattern. [Create KQL queries to query and correlate telemetry across different components](/azure/aks/monitor-aks?tabs=cilium) and [query data in Azure Monitor with Azure Data Explorer](/azure/data-explorer/query-monitor-data) to add and query generated monitoring data. This pattern builds upon existing methods to achieve comprehensive observability across multiple services, including within Power Platform, Azure, and Dynamics 365.

> [!TIP]
> The article provides an example scenario and visual representation of how to trace events across multiple services. This solution is a generalized example scenario architecture, which can be used for many different scenarios and industries.

## Architecture diagram

:::image type="content" source="./media/distributed-tracing/distributed-tracing.png" alt-text="Architecture diagram of distributed tracing across multiple Power Platform services."

## Workflows

Following are the steps for Azure to Dataverse web API workflow:

1. **​​End user applications**: Azure services and solutions like Azure Functions, web services and Kubernetes can start a distributed transaction relating to a specific event generated by the user or an agent.
1. **​Dataverse web API**: Azure services can add a trace parent to requests to Dataverse entities and custom APIs. This trace parent can be included in the body of the request or in the tag query string of the request.
1. **​Dataverse messages**: Requests sent to Dataverse are sent as messages. These messages could relate to an entity or a custom defined API. Messages can have pre and post actions applied to them. These actions could be an Application Insights distributed tracking. 
1. **​Plugins**: Use Dataverse C# Plugin to generate distributed tracing telemetry to relate the Azure request to Dataverse action. 
1. **​Azure Monitor**: Create KQL queries to query and correlate telemetry across components.

Following are the steps for the ​Power Platform workflow: 

1. **​Instrument**: Configure the Power Platform resource with the Application Insights connection string/key.
1. **Trace**: Microsoft Copilot Studio, Power Apps, and Power Automate start a transaction by calling a custom Dataverse API.​ 

## Components

- **[​Application Insights](/azure/azure-monitor/app/app-insights-overview)**: Application Insights is a feature of [Azure Monitor](/azure/azure-monitor/overview), an extensible application performance management (APM) tool that allows you to monitor your live applications. It requires a subscription to [Microsoft Azure](https://azure.microsoft.com/). Application Insights is used for storing trace and dependency information, and enables searching for operation IDs.
- **​​Azure services**: [Observe Azure resources with Azure Monitor](/azure/azure-monitor/app/app-insights-overview). While resources from different Azure services have different monitoring requirements, they generate monitoring data in the same formats so that you can use the same Azure Monitor tools to analyze all Azure resources.
- **[​Copilot Studio](/microsoft-copilot-studio/fundamentals-what-is-copilot-studio)**: [Capture telemetry data from your Copilot Studio agent](/microsoft-copilot-studio/advanced-bot-framework-composer-capture-telemetry?tabs=webApp) for use in Application Insights. To connect your agent to Application Insights, you first need to [add your instrumentation key to your agent's configuration](/microsoft-copilot-studio/advanced-bot-framework-composer-capture-telemetry?tabs=webApp#connect-your-copilot-studio-agent-to-application-insights). You then call an Environment Custom API from your agent to start a distributed transaction.
- **[​Power Apps canvas apps](/power-apps/maker/canvas-apps/)**: [Connect your canvas apps to Application Insights](/power-apps/maker/canvas-apps/application-insights) and then call an environment custom API from your canvas app to start a distributed transaction.
- **[​Power Apps model-driven apps](/power-apps/maker/model-driven-apps/)**: [Set up an Application Insights environment](/power-platform/admin/analyze-telemetry) to receive telemetry on diagnostics and performance captured by the Dataverse platform. Subscribe to receive telemetry about operations that applications perform on your Dataverse database and within model-driven apps. Call an environment custom API to start a distributed transaction.
- **[​Power Automate](/power-automate/)**: [Enable export of cloud flow telemetry data](/power-platform/admin/app-insights-cloud-flow) to Application Insights at the environment level. Pass a distributed trace ID from Microsoft Copilot Studio or Power Apps to a cloud flow.
- **[Microsoft ​Dataverse](/power-apps/maker/data-platform/data-platform-intro)**: [Set up an Application Insights environment](/power-platform/admin/analyze-telemetry) to receive telemetry on diagnostics and performance captured by the Dataverse platform.
- **[​Dataverse plug-ins](/power-apps/developer/data-platform/plug-ins)**: Use C# Dataverse plugins to provide dependency records and integrate with Application Insights.
- **[​Azure Data Explorer](/azure/data-explorer/data-explorer-overview)**: Use Azure Data Explorer to use KQL queries to join data across multiple sources.
- **[Power BI](/power-bi/)**: Visualize and query telemetry data​ with Power BI.

## Scenario details

​​This architecture is designed to allow telemetry to be correlated across multiple components within Power Platform and from systems outside Power Platform by implementing the [W3C Trace Context](https://www.w3.org/TR/trace-context/) recommendation to:

- Correlate trace and request records in Application Insights using dependency records.
- Support end-to-end traceability of operations.
- Enable teams to configure telemetry to diagnose and resolve issues.
- Allow external systems to pass distributed tracing context to Power Platform.
- Include Power Platform components in a distributed tracing session.​

## Considerations

[!INCLUDE [pp-arch-ppwa-link](../../includes/pp-arch-ppwa-link.md)]

### Reliability

Ensure that the implemented solution fits into your [monitoring and alerting strategy](/power-platform/well-architected/performance-efficiency/collect-performance-data).

### Operational Excellence

To effectively monitor your workload for security, performance, and reliability, you need a comprehensive system with its own stack that provides the foundation for all monitoring, detection, and alerting functions. Learn more in [Recommendations for designing and creating a monitoring system](/power-platform/well-architected/operational-excellence/observability).

#### Performance Efficiency

The suggestions in this example scenario allow you to [collect workload performance data recommendation for Power Platform workloads](/power-platform/well-architected/performance-efficiency/collect-performance-data).

## Next step

> [!div class="nextstepaction"]
> [Learn how to implement distributed tracing](distributed-tracing-details.md)

## Contributors

_Microsoft maintains this article. The following contributors wrote this article._

Principal authors:

- **[Grant Archibald](https://www.linkedin.com/in/grantarchibald/)**, Senior Program Manager

## Related resources

- [W3C ​​Trace Context standard defining traceparent and tracestate HTTP headers](https://www.w3.org/TR/trace-context/)
- [​Event framework (Microsoft Dataverse)](/power-apps/developer/data-platform/event-framework)
- [​Understand the execution context (Microsoft Dataverse)](/power-apps/developer/data-platform/understand-the-data-context#passing-a-shared-variable-from-the-api)
